<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Admin Panel ‚Äî CRM</title>

  <link rel="stylesheet" href="admin-panel.css">
</head>

<body>

<!-- THEME TOGGLE -->
<button id="themeToggle" class="theme-btn">üåô</button>

<div class="app">

  <!-- HEADER -->
  <header class="header">
    <div>
      <h1>Admin Panel</h1>
      <p class="sub">Manage Companies ‚Ä¢ Categories ‚Ä¢ Import ‚Ä¢ Export</p>
    </div>
    <div id="info">Logged out</div>
  </header>

  <!-- LAYOUT -->
  <div class="layout">

    <!-- SIDEBAR -->
    <aside class="sidebar">

      <div class="card">
        <div class="row-between">
          <strong>Categories</strong>
          <button id="btnNewCategory" class="btn ghost small">+ New</button>
        </div>

        <div id="cats"></div>

        <hr>

        <label>Import Excel (.xlsx/.xls)</label>
        <div class="import-box">
          <input id="importFile" type="file" accept=".xlsx,.xls">
          <button id="btnImport" class="btn small">Import</button>
        </div>

        <div id="importStatus"></div>
        <pre id="importLog"></pre>
      </div>

      <!-- ADMIN CARD -->
      <div class="card">
        <strong>Admin</strong>
        <button id="btnShowLogin" class="btn primary small">Login</button>
        <button id="btnLogout" class="btn ghost small">Logout</button>
        <button id="btnExport" class="btn primary full">Export XLSX</button>
      </div>

    </aside>

    <!-- MAIN -->
    <main class="main">
      <div class="card">

        <div class="toolbar">
          <input id="filterText" placeholder="Search business‚Ä¶" class="search-input">

          <select id="categoryFilter" class="category-filter">
            <option value="">All categories</option>
          </select>

          <button id="btnRefresh" class="btn primary">Refresh</button>
          <button id="btnListAdmins" class="btn ghost">Admins</button>
          <button id="btnDeleteSelected" class="btn danger">Delete Selected</button>
        </div>

        <div id="list" class="company-list"></div>

      </div>
    </main>

  </div>
</div>


<!-- ===================== EDIT MODAL (TWO COLUMN) ===================== -->
<div class="modal hidden" id="editModal">
  <div class="modal-box">

    <h3>Edit Company</h3>

    <div class="form-grid">

      <div><label>Business Name</label><input id="editName"></div>
      <div><label>Owner</label><input id="editOwner"></div>

      <div><label>State</label><input id="editState"></div>
      <div><label>Phone</label><input id="editPhone"></div>

      <div><label>WhatsApp</label><input id="editWhatsapp"></div>
      <div><label>Email</label><input id="editEmail"></div>

      <div><label>Website</label><input id="editWebsite"></div>
      <div><label>GST No</label><input id="editGst"></div>

      <div>
        <label>Category</label>
        <select id="editCategory"></select>
      </div>

      <div class="full">
        <label>Description</label>
        <textarea id="editDescription"></textarea>
      </div>

    </div>

    <div class="modal-actions">
      <button id="editSave" class="btn primary">Save</button>
      <button id="editCancel" class="btn ghost">Cancel</button>
    </div>

  </div>
</div>


<!-- DELETE MODAL -->
<div class="modal hidden" id="deleteModal">
  <div class="modal-box">
    <h3>Delete Company?</h3>
    <p>This action cannot be undone.</p>

    <div class="modal-actions">
      <button id="deleteConfirm" class="btn danger">Delete</button>
      <button id="deleteCancel" class="btn ghost">Cancel</button>
    </div>
  </div>
</div>


<!-- PREMIUM MODAL -->
<div class="modal hidden" id="premiumModal">
  <div class="modal-box">
    <h3>Set Premium Period</h3>

    <div class="form-grid">
      <div><label>Start Date</label><input type="date" id="premiumStart"></div>
      <div><label>End Date</label><input type="date" id="premiumEnd"></div>
    </div>

    <div class="modal-actions">
      <button id="premiumSave" class="btn primary">Save</button>
      <button id="premiumCancel" class="btn ghost">Cancel</button>
    </div>
  </div>
</div>

<script src="admin-panel.js"></script>

<script>
const btn = document.getElementById("themeToggle");

if (localStorage.getItem("theme") === "light") {
  document.body.classList.add("light");
  btn.textContent = "üåô";
} else {
  btn.textContent = "‚òÄÔ∏è";
}

btn.onclick = () => {
  document.body.classList.toggle("light");
  const mode = document.body.classList.contains("light") ? "light" : "dark";
  localStorage.setItem("theme", mode);
  btn.textContent = mode === "light" ? "üåô" : "‚òÄÔ∏è";
};
</script>

</body>
</html>
